<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Talking Data ¬∑ Documentation</title>
  <meta name="description" content="Talking Data: Multi-provider AI Data Analysis library using SQL reasoning on pandas DataFrames with OpenAI, Groq, and Google Gemini.">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link id="hljs-theme" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>window.addEventListener('DOMContentLoaded',()=>hljs.highlightAll());</script>

  <style>
    :root {
      --bg:#0e1116;--text:#e7ecf3;--muted:#9aa1b4;
      --panel:#171b24;--border:#2c3344;
      --brand:#7c5cff;--brand2:#9f8cff;
      --ok:#16c964;--warn:#f5a524;--err:#f31260;
      --code:#0b0f17;--shadow:0 8px 24px rgba(0,0,0,.25);
    }
    .theme-light{
      --bg:#f9fafb;--text:#1b1e25;--muted:#4b5563;
      --panel:#fff;--border:#e5e7eb;
      --brand:#5b21b6;--brand2:#7c3aed;--code:#0b0f17;
    }
    body{margin:0;font-family:Inter,system-ui;background:var(--bg);color:var(--text);line-height:1.6;}
    a{color:var(--brand2);text-decoration:none;}
    a:hover{text-decoration:underline;}
    .layout{display:grid;grid-template-columns:260px 1fr;min-height:100vh;}
    aside{background:var(--panel);border-right:1px solid var(--border);padding:18px;position:sticky;top:0;height:100vh;overflow-y:auto;}
    .brand{display:flex;align-items:center;gap:10px;margin-bottom:16px;}
    .brand .logo{background:var(--brand);width:38px;height:38px;display:grid;place-items:center;border-radius:10px;font-weight:700;color:#fff;}
    .brand h1{font-size:16px;margin:0;}
    .brand small{color:var(--muted);display:block;margin-top:2px;}
    nav .title{margin-top:12px;font-size:12px;text-transform:uppercase;color:var(--muted);}
    nav a{display:block;padding:8px 10px;margin:4px 0;border-radius:6px;}
    nav a.active,nav a:hover{background:rgba(124,92,255,.15);}
    main{padding:28px;max-width:1100px;margin:auto;}
    h2{margin-top:44px;font-size:24px;}
    h3{margin-top:24px;font-size:18px;}
    pre{background:var(--code);border:1px solid var(--border);border-radius:10px;padding:14px;overflow:auto;position:relative;}
    .copy{position:absolute;right:8px;top:8px;font-size:12px;padding:4px 8px;border-radius:6px;background:rgba(255,255,255,.05);border:1px solid var(--border);cursor:pointer;}
    .copy.copied{color:var(--ok);border-color:var(--ok);}
    table{width:100%;border-collapse:collapse;font-size:14px;margin:12px 0;}
    th,td{padding:8px 10px;border-bottom:1px solid var(--border);}
    th{color:var(--muted);text-align:left;}
    .callout{border-left:3px solid var(--brand);background:rgba(124,92,255,.1);padding:10px 12px;border-radius:6px;margin:14px 0;}
    .footer{text-align:center;margin:48px 0;color:var(--muted);font-size:13px;}
    #themeToggle{position:fixed;bottom:16px;left:16px;padding:8px 10px;border:none;border-radius:8px;background:var(--brand);color:#fff;cursor:pointer;box-shadow:var(--shadow);}
    @media(max-width:900px){.layout{grid-template-columns:1fr;}aside{position:relative;height:auto;}}
  </style>
</head>

<body>
<div class="layout">
  <aside>
    <div class="brand">
      <div class="logo">TD</div>
      <div><h1>Talking Data</h1><small>v1.0.0</small></div>
    </div>
    <nav>
      <div class="title">Overview</div>
      <a href="#intro">Introduction</a>
      <a href="#install">Installation</a>
      <a href="#quickstart">Quickstart</a>
      <a href="#examples">Examples</a>
      <div class="title">API</div>
      <a href="#function">Function Reference</a>
      <a href="#params">Parameters</a>
      <a href="#return">Return Structure</a>
      <a href="#logs">Logging</a>
      <div class="title">Providers</div>
      <a href="#providers">Supported Providers</a>
      <div class="title">More</div>
      <a href="#faq">FAQ</a>
      <a href="#changelog">Version History</a>
      <a href="#license">License</a>
    </nav>
  </aside>

  <main>
    <section id="intro">
      <p>
        <img src="https://img.shields.io/pypi/v/talkingdata.svg?color=7c5cff&label=PyPI%20Version" alt="PyPI Version">
        <img src="https://img.shields.io/badge/python-3.8%2B-blue.svg" alt="Python">
        <img src="https://img.shields.io/badge/license-MIT-green.svg" alt="License">
        <a href="https://mabdullah40.github.io/Talking-Data/"><img src="https://img.shields.io/badge/Docs-View%20Full%20Documentation-9f8cff.svg" alt="Docs"></a>
      </p>
      <h2>üöÄ Talking Data</h2>
      <p><strong>Talking Data</strong> is a lightweight, multi-provider <b>AI Data Analysis</b> library that performs SQL-based reasoning directly on your <code>pandas.DataFrame</code> using <b>OpenAI</b>, <b>Groq</b>, or <b>Google Gemini</b> models.</p>
      <ul>
        <li>üß© Generates SQL queries from plain English questions</li>
        <li>üöÄ Executes them locally using DuckDB</li>
        <li>üß† Summarizes results as insightful text or HTML</li>
        <li>‚öô Installs missing dependencies automatically</li>
      </ul>
      <div class="callout">No SQL experience required ‚Äî just write a question, and <code>open_analysis()</code> handles everything.</div>
    </section>

    <section id="install">
      <h2>Installation</h2>
      <pre><button class="copy">Copy</button><code class="language-bash">pip install talking_data</code></pre>
      <p>Once installed, import it in your Python project:</p>
      <pre><button class="copy">Copy</button><code class="language-python">from talking_data import open_analysis</code></pre>
    </section>

    <section id="quickstart">
      <h2>‚ö° Quickstart Example</h2>
      <pre><button class="copy">Copy</button><code class="language-python">from talking_data import open_analysis
import pandas as pd

df = pd.DataFrame({
    "region": ["East", "West", "North", "South"],
    "sales": [1200, 800, 950, 1100],
    "profit": [200, 100, 150, 180]
})

result = open_analysis(
    df=df,
    model_provider="openai",
    api_key="YOUR_API_KEY",
    question="Which region performs best by profit margin?",
    query_context="Profit margin = profit / sales * 100",
    log_level="detailed"
)

print("SQL Query:", result["sql_query"])
print(result["query_result"])
print("Insights:", result["plain_text_output"])</code></pre>
    </section>

    <section id="examples">
      <h2>üß† Examples by Provider</h2>

      <h3>1Ô∏è‚É£ OpenAI Example</h3>
      <pre><button class="copy">Copy</button><code class="language-python">result = open_analysis(
    df=df,
    model_provider="openai",
    api_key="YOUR_OPENAI_API_KEY",
    question="Which region has the highest total sales?",
)
print(result["plain_text_output"])</code></pre>

      <h3>2Ô∏è‚É£ Groq Example</h3>
      <pre><button class="copy">Copy</button><code class="language-python">result = open_analysis(
    df=df,
    model_provider="groq",
    api_key="YOUR_GROQ_API_KEY",
    question="Compare profit and sales correlation by region."
)
print(result["plain_text_output"])</code></pre>

      <h3>3Ô∏è‚É£ Gemini Example</h3>
      <pre><button class="copy">Copy</button><code class="language-python">result = open_analysis(
    df=df,
    model_provider="gemini",
    api_key="YOUR_GEMINI_API_KEY",
    question="Find the top 2 regions by total sales."
)
print(result["plain_text_output"])</code></pre>

      <div class="callout">
        Each provider uses its own SDK and default model automatically.  
        You can override the model name via the <code>model</code> parameter.
      </div>
    </section>
    <section id="example-output">
        <h2>üß† Example Output</h2>

        <p>Here‚Äôs what a typical <code>open_analysis()</code> call returns ‚Äî a mix of plain text insights, SQL, and HTML output that you can render anywhere:</p>

        <h3>Plain Text Output</h3>
        <pre><button class="copy">Copy</button><code class="language-text">Region East has the highest profit margin of 16.7%, followed by South at 16.3%.</code></pre>

        <h3>Generated SQL</h3>
        <pre><button class="copy">Copy</button><code class="language-sql">SELECT region, SUM(profit)/SUM(sales)*100 AS margin 
            FROM df 
            GROUP BY region 
            ORDER BY margin DESC;</code></pre>

        <h3>HTML Output</h3>
        <pre><button class="copy">Copy</button><code class="language-html">&lt;section&gt;
    &lt;h3&gt;Regional Profit Margin Insights&lt;/h3&gt;
    &lt;ul&gt;
        &lt;li&gt;East region leads with a 16.7% margin&lt;/li&gt;
        &lt;li&gt;South follows closely at 16.3%&lt;/li&gt;
    &lt;/ul&gt;
    &lt;/section&gt;</code></pre>

        <div class="callout">
            üí° The <code>html_output</code> field is ideal for embedding in dashboards or notebooks.  
            The <code>plain_text_output</code> is optimized for chat or console interfaces.  
            Both are auto-generated.
        </div>
        </section>
    <section id="providers">
      <h2>üß© Supported Providers</h2>
      <table>
        <tr><th>Provider</th><th>Default Model</th><th>SDK Dependency</th></tr>
        <tr><td>üß† OpenAI</td><td><code>gpt-4o</code></td><td><code>openai</code></td></tr>
        <tr><td>‚öô Groq</td><td><code>llama-3.3-70b-versatile</code></td><td><code>groq</code></td></tr>
        <tr><td>üåê Google Gemini</td><td><code>gemini-2.0-flash</code></td><td><code>google-genai</code></td></tr>
      </table>
      <p>The library detects and loads each SDK lazily at runtime ‚Äî missing packages are installed automatically.</p>
    </section>

    <section id="function">
      <h2>üß© Function Reference</h2>
      <pre><button class="copy">Copy</button><code class="language-python">open_analysis(
    df: pd.DataFrame,
    model_provider: str = "openai",
    model: str = None,
    api_key: str = None,
    question: str = "Do a data analysis on the dataframe and give me insights?",
    temperature_one: float = 0.2,
    temperature_two: float = 0.7,
    max_completion_tokens: int = 1024,
    output_layer_context: str = None,
    query_context: str = None,
    log_level: str = "basic"
) -> dict</code></pre>

      <p>This function performs a two-stage process:</p>
      <ol>
        <li><strong>SQL Generation</strong> ‚Äî Converts your natural-language question into an executable SQL query.</li>
        <li><strong>Insight Summarization</strong> ‚Äî Executes the query on DuckDB and summarizes the result in both HTML and text formats.</li>
      </ol>
    </section>

    <section id="params">
      <h2>üßæ Parameters</h2>
      <table>
        <tr><th>Parameter</th><th>Type</th><th>Description</th></tr>
        <tr><td><code>df</code></td><td><code>pandas.DataFrame</code></td><td>Dataset to analyze.</td></tr>
        <tr><td><code>model_provider</code></td><td><code>str</code></td><td>Provider name: "gemini", "groq", or "openai".</td></tr>
        <tr><td><code>model</code></td><td><code>str</code></td><td>Optional model override for fine-tuning provider behavior.</td></tr>
        <tr><td><code>api_key</code></td><td><code>str</code></td><td>API key for the selected provider.</td></tr>
        <tr><td><code>question</code></td><td><code>str</code></td><td>Natural language query describing what to analyze.</td></tr>
        <tr><td><code>query_context</code></td><td><code>str</code></td><td>Optional context (like KPI formula or definition).</td></tr>
        <tr><td><code>temperature_one</code></td><td><code>float</code></td><td>Controls creativity for SQL generation.</td></tr>
        <tr><td><code>temperature_two</code></td><td><code>float</code></td><td>Controls summarization creativity.</td></tr>
        <tr><td><code>log_level</code></td><td><code>str</code></td><td>"none" | "basic" | "detailed" | "debug".</td></tr>
      </table>
    </section>

    <section id="return">
      <h2>üì§ Return Structure</h2>
      <pre><button class="copy">Copy</button><code class="language-json">{
  "provider": "openai",
  "model": "gpt-4o",
  "sql_query": "SELECT region, SUM(profit)/SUM(sales)*100 AS margin FROM df GROUP BY region ORDER BY margin DESC",
  "query_result": "<pandas.DataFrame>",
  "html_output": "<section>...</section>",
  "plain_text_output": "East region has the highest profit margin (16.7%)",
  "logs": [...]
}</code></pre>
      <div class="callout">You can access <code>result["html_output"]</code> for a formatted HTML summary suitable for embedding in web apps or notebooks.</div>
    </section>

    <section id="logs">
      <h2>ü™µ Logging Levels</h2>
      <ul>
        <li><b>none</b> ‚Äî No logs returned.</li>
        <li><b>basic</b> ‚Äî Shows only essential steps.</li>
        <li><b>detailed</b> ‚Äî Includes SQL and phase transitions.</li>
        <li><b>debug</b> ‚Äî Includes tracebacks and full prompt data.</li>
      </ul>
      <p>Logs are stored in <code>result["logs"]</code> as a list of messages.</p>
    </section>

    <section id="faq">
      <h2>üß© FAQ</h2>
      <p><b>Q:</b> Does it modify my DataFrame?<br><b>A:</b> No, it registers it temporarily in DuckDB for querying.</p>
      <p><b>Q:</b> Can it work offline?<br><b>A:</b> Not yet ‚Äî all providers are cloud APIs.</p>
      <p><b>Q:</b> Do I need to install dependencies manually?<br><b>A:</b> No, Talking Data installs them automatically when needed.</p>
      <p><b>Q:</b> Can I get HTML output?<br><b>A:</b> Yes, via <code>result["html_output"]</code>.</p>
    </section>

    <section id="changelog">
      <h2>üîÅ Version History</h2>
      <table>
        <tr><th>Version</th><th>Highlights</th></tr>
        <tr><td>0.9.0</td><td>Improved logging, response behaviour</td></tr>
        <tr><td>0.8.0</td><td>Internal performance upgrades</td></tr>
        <tr><td>0.7.0</td><td>Enhanced summarization accuracy</td></tr>
        <tr><td>0.5.0</td><td>Added lazy import and unified provider handling</td></tr>
        <tr><td>0.3.0</td><td>Added Gemini and Groq support</td></tr>
        <tr><td>0.0.0</td><td>Initial OpenAI-only release</td></tr>
      </table>
    </section>

    <section id="license">
      <h2>ü™™ License</h2>
      <pre><button class="copy">Copy</button><code class="language-text">MIT License

Copyright (2025)

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction...</code></pre>
      <p class="footer">Made with ‚ù§Ô∏è by Mohammad Abdullah ¬∑ Talking Data v0.9.0 ¬∑ MIT License</p>
    </section>
  </main>
</div>

<button id="themeToggle">üåì</button>

<script>
  const themeToggle=document.getElementById('themeToggle');
  const hljsTheme=document.getElementById('hljs-theme');
  function setTheme(t){if(t==='light'){document.body.classList.add('theme-light');localStorage.setItem('theme','light');hljsTheme.href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css';}else{document.body.classList.remove('theme-light');localStorage.setItem('theme','dark');hljsTheme.href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css';}}
  setTheme(localStorage.getItem('theme')||'dark');
  themeToggle.onclick=()=>setTheme(document.body.classList.contains('theme-light')?'dark':'light');
  document.querySelectorAll('.copy').forEach(btn=>{
    btn.onclick=async()=>{
      const code=btn.nextElementSibling.innerText;
      await navigator.clipboard.writeText(code);
      btn.classList.add('copied');btn.textContent='Copied!';
      setTimeout(()=>{btn.classList.remove('copied');btn.textContent='Copy';},1200);
    };
  });
  const links=document.querySelectorAll('aside nav a');
  const sections=[...links].map(a=>document.querySelector(a.getAttribute('href')));
  window.addEventListener('scroll',()=>{
    const y=window.scrollY+100;
    sections.forEach((s,i)=>{
      if(!s)return;
      if(s.offsetTop<=y&&s.offsetTop+s.offsetHeight>y){
        links.forEach(l=>l.classList.remove('active'));
        links[i].classList.add('active');
      }
    });
  });
</script>
</body>
</html>
